<!-- 盲盒设置页 -->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">定制你的盲盒</text>
    <text class="nav-icon" bindtap="showHelp">ℹ️</text>
  </view>

  <scroll-view class="content" scroll-y>
    <!-- 范围设置区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">探索范围</text>
        <text class="section-desc">步行可达的距离（1-3 公里）</text>
      </view>
      <view class="range-container">
        <slider class="range-slider" min="1" max="3" step="0.1" value="{{rangeValue}}" bindchange="onRangeChange" activeColor="#ff6b00" />
        <view class="range-display">
          <text class="range-value">{{rangeValue}}</text>
          <text class="range-unit">公里</text>
        </view>
      </view>
    </view>

    <!-- 标签选择区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">兴趣标签</text>
        <text class="section-desc">选择你喜欢的类型，精准匹配盲盒</text>
      </view>
      <view class="tags-container">
        <view 
          class="tag art {{isArt ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="文艺"
        >
          <text class="tag-icon">🎨</text>
          <text class="tag-text">文艺</text>
        </view>

        <view 
          class="tag food {{isFood ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="印象城"
        >
          <text class="tag-icon">🍽️</text>
          <text class="tag-text">印象城</text>
        </view>
        <view 
          class="tag retro {{isOld ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="复古"
        >
          <text class="tag-icon">🕰️</text>
          <text class="tag-text">复古</text>
        </view>
        <view 
          class="tag nature {{isNature ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="自然"
        >
          <text class="tag-icon">🌳</text>
          <text class="tag-text">自然</text>
        </view>
        <view 
          class="tag market {{isMarket ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="小众市集"
        >
          <text class="tag-icon">🛍️</text>
          <text class="tag-text">小众市集</text>
        </view>
        <view 
          class="tag entertain {{isFun ? 'tag-selected' : 'tag-unselected'}}" 
          bindtap="toggleTag" 
          data-tag="娱乐"
        >
          <text class="tag-icon">🎮</text>
          <text class="tag-text">娱乐</text>
        </view>
      </view>
    </view>
    
    <!-- 开关设置区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">盲盒设置</text>
        <text class="section-desc">开启后将根据你的偏好生成个性化盲盒</text>
      </view>
      <view class="switch-container">
            <text class="switch-label">启用盲盒推荐</text>
            <view class="gift-box-switch {{isGiftBoxOpen ? 'open' : 'closed'}} {{boxActive ? 'active' : ''}}" bindtap="toggleGiftBox" bindtouchstart="handleBoxTouchStart" bindtouchend="handleBoxTouchEnd">
              <view class="gift-box-body"></view>
              <view class="gift-box-side"></view>
              <view class="gift-box-top-side"></view>
              <view class="gift-box-lid"></view>
            </view>
          </view>
    </view>

    <!-- 生成按钮 -->
    <view class="generate-section">
      <button class="generate-btn" bindtap="generateBlindBox" style="width: 340rpx; ">生成我的城市盲盒</button>
    </view>
  </scroll-view>
</view>