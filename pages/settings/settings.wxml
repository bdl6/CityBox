<!-- 盲盒设置页 -->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <view class="nav-left" bindtap="goBack">
      <image class="nav-icon" src="/images/back.png"></image>
    </view>
    <text class="title">定制你的盲盒</text>
    <view class="nav-right" bindtap="showHelp">
      <image class="nav-icon" src="/images/help.png"></image>
    </view>
  </view>

  <scroll-view class="content" scroll-y>
    <!-- 范围设置区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">探索范围</text>
        <text class="section-desc">步行可达的距离（1-3 公里）</text>
      </view>
      <view class="range-container">
        <slider class="range-slider" min="1" max="3" step="0.1" value="{{rangeValue}}" bindchange="onRangeChange" activeColor="#ff6b00" />
        <view class="range-display">
          <text class="range-value">{{rangeValue}}</text>
          <text class="range-unit">公里</text>
        </view>
      </view>
    </view>

    <!-- 标签选择区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">兴趣标签</text>
        <text class="section-desc">选择你喜欢的类型，精准匹配盲盒</text>
      </view>
      <view class="tags-container">
        <view 
          class="tag {{selectedTags.indexOf('文艺') !== -1 ? 'tag-selected' : 'tag-unselected'}} art" 
          bindtap="toggleTag" 
          data-tag="文艺"
        >
          <image class="tag-icon" src="/images/brush.png"></image>
          <text class="tag-text">文艺</text>
        </view>

        <view 
          class="tag {{selectedTags.indexOf('美食') !== -1 ? 'tag-selected' : 'tag-unselected'}} food" 
          bindtap="toggleTag" 
          data-tag="美食"
        >
          <image class="tag-icon" src="/images/fork.png"></image>
          <text class="tag-text">美食</text>
        </view>
        <view 
          class="tag {{selectedTags.indexOf('复古') !== -1 ? 'tag-selected' : 'tag-unselected'}} retro" 
          bindtap="toggleTag" 
          data-tag="复古"
        >
          <image class="tag-icon" src="/images/camera.png"></image>
          <text class="tag-text">复古</text>
        </view>
        <view 
          class="tag {{selectedTags.indexOf('自然') !== -1 ? 'tag-selected' : 'tag-unselected'}} nature" 
          bindtap="toggleTag" 
          data-tag="自然"
        >
          <image class="tag-icon" src="/images/leaf.png"></image>
          <text class="tag-text">自然</text>
        </view>
        <view 
          class="tag {{selectedTags.indexOf('小众市集') !== -1 ? 'tag-selected' : 'tag-unselected'}} market" 
          bindtap="toggleTag" 
          data-tag="小众市集"
        >
          <image class="tag-icon" src="/images/flag.png"></image>
          <text class="tag-text">小众市集</text>
        </view>
      </view>
    </view>
    
    <!-- 开关设置区 -->
    <view class="setting-section">
      <view class="section-header">
        <text class="section-title">盲盒设置</text>
        <text class="section-desc">开启后将根据你的偏好生成个性化盲盒</text>
      </view>
      <view class="switch-container">
        <text class="switch-label">启用盲盒推荐</text>
        <view class="switch" bindtap="toggleGiftBox">
          <input type="checkbox" checked="{{isGiftBoxOpen}}" />
          <view class="slider"></view>
        </view>
      </view>
    </view>

    <!-- 生成按钮 -->
    <view class="generate-section">
      <button class="generate-btn" bindtap="generateBlindBox" style="width: 340rpx; ">生成我的城市盲盒</button>
    </view>
  </scroll-view>
</view>